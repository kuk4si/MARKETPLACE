{% extends 'base.html' %}
{% load static %}



{% block custom_css %}
    {% get_static_prefix as STATIC_PREFIX %}
    <link rel="stylesheet" href="{{ STATIC_PREFIX }}css/profile.css" type="text/css">
{% endblock %}



{% block title %}Пользователь {{ user.username }}{% endblock %}

{% block content %}

        <div class="profile">
            <div class="profile_short_card">
                <div class="user_title">
                    {{ user.username }}
                </div>

                {% get_static_prefix as STATIC_PREFIX %}

                {% if user.profile.avatar %}
                    <img class="user_avatar" src="{{ user.profile.avatar.url }}">
                {% else %}
                    <img class="user_avatar" src="{{ STATIC_PREFIX }}img/default_profile_avatar.jpg">
                {% endif %}

                {% if request.user.pk == user.pk %}
                    <div class="allow_update">
                        <a href="{% url 'accounts:profile_update' user.pk %}">
                            <button type="button" class="btn btn-primary">Редактировать</button>
                        </a>
                    </div>
                {% endif %}

                <div class="register_date">
                    <p>Дата регистрации</p>
                    <p>{{ user.date_joined }}</p>
                </div>

            </div>

            <div class="profile_short_about">
                <p>Имя: {{ user.profile.name }}</p>
                <p>О себе: {{ user.profile.bio }}</p>
            </div>

        </div>



        {% if qs %}
                <p>Товары пользователя</p>

                <table class="table table-dark">
                  <thead>
                    <tr>
                      <th scope="col">Название</th>
                      <th scope="col">Цена</th>
                    </tr>
                  </thead>
                <tbody>
                {% for product in qs %}
                <tr>
                      <td><a href="{% url 'products:detail' product.slug %}">{{ product.name }}</a></td>
                      <td>{{ product.price }}</td>
                </tr>
                {% endfor %}
                </tbody>
                </table>
        {% endif %}

{% endblock  %}



